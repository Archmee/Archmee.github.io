<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>前端之旅第 186~208 天 | 神无</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css" type="text/css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
</head>

<body>
  <nav class="app-nav">
  
      
        <a class="active" href="/.">home</a>
        

      
  
      
        <a href="/archives">archive</a>
      
  
      
        <a href="/demo">demo</a>
      
  
      
        <a href="/atom.xml">rss</a>
      
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/201702/2017-02-01.html">前端之旅第 186~208 天</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">February 01 2017</p>
  </section>

  <section class="article-entry">
    <p>其实差不多7、8天以前完成了IFE2015 task3的SPA应用界面布局工作，但一直没找到好的数据结构表达方式和编程实现方式，所以其他时间（除了春节）都会思考哪种存储和查询数据的方式才是最理想的。所以迟迟下不了手，这是一大忌讳。在多次修改调整后，整个todo应用数据存储的方式有了一个比较理想的方案，当然，数据都是存储在localStorage中：</p>
<ul>
<li>所有分类数据汇总存储为一个对象，每个分类条目就是该对象中一个用id作为键值的对象，这样做是为了方便按id索引单条分类数据，而每条分类数据都是独立的，没有嵌套关系，子分类是通过维护每个分类的子分类列表属性完成的，而且每个分类还持有父分类id，熟悉DOM的同学一下就能get到这是借鉴了DOM的思想。整个对象中始终会有一个分类对象作为顶级分类用于保存一级二级以及更多子分类，类似于DOM中的html节点，而且保存了该分类下的todo列表，添加删除todo时要维护此表。</li>
<li>todo数据是按照id单独存放的，也就是说，要获取todo，知道它的id后直接从localStorage中取出来，这样做也是因为方便对单条tudo进行操作。</li>
<li>整个程序采用的是Module模式，可能还要使用观察者模式或者发布订阅模式，但是不知道是否合适，因为Js事件从本质来说就是观察者模式。毕竟是第一次实践设计模式的知识，只有慢慢试探了。</li>
<li>整个app分为4个部分，分类列表主要负责分类的列表数据和模板，todo列表负责分类的数据和模板，todo详情部分负责单条todo的详情和展示模板等，一个主要部分负责协调上述几个部分的工作。</li>
<li>以下是具体数据结构<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单条分类</span></span><br><span class="line"><span class="string">"cid_1487710962417"</span>: &#123;</span><br><span class="line">    <span class="string">"addTime"</span>:<span class="number">1487710962417</span>, <span class="comment">//添加时间</span></span><br><span class="line">    <span class="string">"cid"</span>:<span class="string">"cid_1487710962417"</span>, <span class="comment">//分类id</span></span><br><span class="line">    <span class="string">"pid"</span>:<span class="string">"cid_0000000000001"</span>, <span class="comment">//父分类id</span></span><br><span class="line">    <span class="string">"title"</span>:<span class="string">"未命名分类1"</span>, <span class="comment">//分类名</span></span><br><span class="line">    <span class="string">"childCatList"</span>:[ <span class="comment">//直接子分类</span></span><br><span class="line">        <span class="string">"cid_1487883840564"</span>,</span><br><span class="line">        <span class="string">"cid_1487980933649"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"childTodoList"</span>:[ <span class="comment">//直接子todo</span></span><br><span class="line">        <span class="string">"tid_1487776376694"</span>,</span><br><span class="line">        <span class="string">"tid_1487776391312"</span>,</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//单条todo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"addTime"</span>:<span class="number">1487776376694</span>, <span class="comment">//添加时间</span></span><br><span class="line">    <span class="string">"tid"</span>:<span class="string">"tid_1487776376694"</span>, <span class="comment">//todo id</span></span><br><span class="line">    <span class="string">"cid"</span>:<span class="string">"cid_1487710962417"</span>, <span class="comment">//分类id</span></span><br><span class="line">    <span class="string">"emergency"</span>:<span class="number">0</span>, <span class="comment">//紧急程度，暂时没用上</span></span><br><span class="line">    <span class="string">"title"</span>:<span class="string">"未命名任务"</span>, <span class="comment">//todo标题</span></span><br><span class="line">    <span class="string">"content"</span>:<span class="string">"出门交电费"</span>, <span class="comment">//todo内容</span></span><br><span class="line">    <span class="string">"status"</span>:<span class="number">1</span>, <span class="comment">//状态1和-1</span></span><br><span class="line">    <span class="string">"expireTime"</span>:<span class="number">1487721600000</span> <span class="comment">//失效时间</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="https://raw.githubusercontent.com/Archmee/lkd2d97zvb5fvz89feyhwr98v/master/gitblog/avatar.png" alt="avatar" />
    <div class="grid-item">
      <p class="title"> 神无 </p>
      <p class="subtitle"> 幻世当空，恩怨休怀，舍悟离迷，六尘不改。 </p>
    <div>
  </section>

  <section class="share-btns">
    <p> share it if you like it. </p>
    <!-- <a
  class="twitter-share-button"
  data-size="large"
  data-via="DrakeLeung"
  href="https://twitter.com/intent/tweet?text=其实差不多7、8天以前完成了IFE201"
>
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>
 -->
  </section>
</div>


  
</main>

</body>
</html>
